local Stats = game:GetService("Stats")
local Players = game:GetService("Players")
local VirtualInputManager = game:GetService("VirtualInputManager")
local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/shlexware/Orion/main/source"))()

local local_player = Players.LocalPlayer or Players.PlayerAdded:Wait()
local parry_remote = nil
local PingBased = false
local PingBasedOffset = 0.05
local DistanceToParry = 0.4
local ParryDelay = 0.015

local function resolve_parry_Remote()
    for _, service in pairs({game:GetService("AdService"), game:GetService("SocialService")}) do
        local temp_remote = service:FindFirstChildOfClass("RemoteEvent")
        if temp_remote and temp_remote.Name:find("\n") then
            parry_remote = temp_remote
            break
        end
    end
end

local function FindBall()
    local RealBall
    for _, ball in pairs(workspace:WaitForChild("Balls"):GetChildren()) do
        if ball:GetAttribute("realBall") == true then
            RealBall = ball
            break
        end
    end
    return RealBall
end

local function IsTheTarget()
    return local_player.Character and local_player.Character:FindFirstChild("Highlight")
end

task.spawn(function()
    while task.wait(ParryDelay) do
        local Ball = FindBall()
        if Ball then
            local BallPosition = Ball.Position
            local BallVelocity = Ball.AssemblyLinearVelocity.Magnitude
            local Distance = local_player:DistanceFromCharacter(BallPosition)
            local Ping = BallVelocity * (Stats.Network.ServerStatsItem["Data Ping"]:GetValue() / 1000)

            if PingBased then
                Distance -= Ping + PingBasedOffset
            end

            if (Distance / BallVelocity) <= DistanceToParry and IsTheTarget() then
                VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 0)
                VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 0)
            end
        end
    end
end)

resolve_parry_Remote()

-- OrionLib Window Setup
local Window = OrionLib:MakeWindow({
    Name = "ikorz",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "ikorz"
})

Window:MakeNotification({
    Name = "Auto Parry Active",
    Content = "The script is running. Auto Parry is enabled.",
    Image = "rbxassetid://4483345998",
    Time = 5
})

OrionLib:Init()