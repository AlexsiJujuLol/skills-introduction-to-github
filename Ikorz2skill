local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:FindFirstChild("PlayerGui") or Instance.new("PlayerGui", player)

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "IkorzUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Blur Effect
local blur = Instance.new("BlurEffect")
blur.Size = 0
blur.Parent = game:GetService("Lighting")

-- Loading Screen
local loadingFrame = Instance.new("Frame")
loadingFrame.Size = UDim2.new(1, 0, 1, 0)
loadingFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
loadingFrame.BackgroundTransparency = 0.5
loadingFrame.Parent = screenGui

local loadingText = Instance.new("TextLabel")
loadingText.Size = UDim2.new(0, 200, 0, 50)
loadingText.Position = UDim2.new(0.5, -100, 0.5, -25)
loadingText.BackgroundTransparency = 1
loadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
loadingText.Font = Enum.Font.GothamBold
loadingText.TextSize = 24
loadingText.Text = "Loading UI..."
loadingText.Parent = loadingFrame

-- Smooth Dot Animation
local dot = Instance.new("Frame")
dot.Size = UDim2.new(0, 12, 0, 12)
dot.Position = UDim2.new(0.5, -6, 0.6, -6)
dot.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
dot.Parent = loadingFrame

spawn(function()
    while loadingFrame.Parent do
        TweenService:Create(dot, TweenInfo.new(0.5, Enum.EasingStyle.Linear, Enum.EasingDirection.Out), {Position = UDim2.new(0.5, -6, 0.58, -6)}):Play()
        wait(0.5)
        TweenService:Create(dot, TweenInfo.new(0.5, Enum.EasingStyle.Linear, Enum.EasingDirection.Out), {Position = UDim2.new(0.5, -6, 0.6, -6)}):Play()
        wait(0.5)
    end
end)

-- Main UI Frame (Glass Effect)
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 420, 0, 270)
mainFrame.Position = UDim2.new(0.5, -210, 0.5, -135)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
mainFrame.BackgroundTransparency = 0.3
mainFrame.ClipsDescendants = true
mainFrame.Visible = false  -- Initially hidden until CAPTCHA is passed
mainFrame.Parent = screenGui

-- Full Shadow Effect
local shadow = Instance.new("ImageLabel")
shadow.Size = UDim2.new(1, 50, 1, 50)
shadow.Position = UDim2.new(0, -25, 0, -25)
shadow.Image = "rbxassetid://1316045217"
shadow.ImageTransparency = 0.4
shadow.ScaleType = Enum.ScaleType.Slice
shadow.SliceCenter = Rect.new(10, 10, 118, 118)
shadow.BackgroundTransparency = 1
shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
shadow.Parent = mainFrame

-- UI Stroke for Shininess
local stroke = Instance.new("UIStroke")
stroke.Thickness = 4
stroke.Transparency = 0.05
stroke.Color = Color3.fromRGB(160, 160, 255)
stroke.Parent = mainFrame

-- Animated Title Bar
local titleBar = Instance.new("TextLabel")
titleBar.Size = UDim2.new(1, 0, 0, 40)
titleBar.BackgroundColor3 = Color3.fromRGB(45, 45, 80)
titleBar.TextColor3 = Color3.fromRGB(255, 255, 255)
titleBar.Font = Enum.Font.GothamBold
titleBar.TextSize = 20
titleBar.Text = "Ikorz UI"
titleBar.Parent = mainFrame

-- Dynamic Glowing Gradient
local glow = Instance.new("UIGradient")
glow.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(160, 160, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 120, 255))
}
glow.Rotation = 0
glow.Parent = titleBar

spawn(function()
    while true do
        TweenService:Create(glow, TweenInfo.new(2, Enum.EasingStyle.Linear, Enum.EasingDirection.Out), {Rotation = 180}):Play()
        wait(2)
        TweenService:Create(glow, TweenInfo.new(2, Enum.EasingStyle.Linear, Enum.EasingDirection.Out), {Rotation = 0}):Play()
        wait(2)
    end
end)

-- Improved Load Animation
mainFrame.Position = UDim2.new(0.5, -210, 0.5, -400)
mainFrame.Size = UDim2.new(0, 0, 0, 0)
mainFrame.BackgroundTransparency = 1

local function loadMainUI()
    TweenService:Create(mainFrame, TweenInfo.new(1, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {
        Position = UDim2.new(0.5, -210, 0.5, -135),
        Size = UDim2.new(0, 420, 0, 270),
        BackgroundTransparency = 0.3
    }):Play()

    mainFrame.Visible = true  -- Make UI visible after the loading animation
end

-- Human Verification System (Simple CAPTCHA)
local captchaFrame = Instance.new("Frame")
captchaFrame.Size = UDim2.new(0.5, 0, 0.3, 0)
captchaFrame.Position = UDim2.new(0.25, 0, 0.35, 0)
captchaFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 80)
captchaFrame.Parent = screenGui

local captchaLabel = Instance.new("TextLabel")
captchaLabel.Size = UDim2.new(1, 0, 0.5, 0)
captchaLabel.BackgroundColor3 = Color3.fromRGB(45, 45, 80)
captchaLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
captchaLabel.Font = Enum.Font.GothamBold
captchaLabel.TextSize = 18
captchaLabel.Text = "Are you human? Type 'yes' to continue."
captchaLabel.Parent = captchaFrame

local captchaInput = Instance.new("TextBox")
captchaInput.Size = UDim2.new(0.8, 0, 0.4, 0)
captchaInput.Position = UDim2.new(0.1, 0, 0.5, 0)
captchaInput.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
captchaInput.TextColor3 = Color3.fromRGB(255, 255, 255)
captchaInput.Font = Enum.Font.Gotham
captchaInput.TextSize = 18
captchaInput.PlaceholderText = "Type 'yes' here"
captchaInput.Parent = captchaFrame

captchaInput.FocusLost:Connect(function(enterPressed)
    if enterPressed and captchaInput.Text:lower() == "yes" then
        -- Remove loading screen and blur
        captchaFrame:Destroy()
        loadingFrame:Destroy()
        blur.Size = 0
        -- Show main UI
        loadMainUI()
    else
        captchaInput.Text = ""
        captchaInput.PlaceholderText = "Try again"
    end
end)

-- Show blur effect and loading animation
TweenService:Create(blur, TweenInfo.new(1), {Size = 24}):Play()
